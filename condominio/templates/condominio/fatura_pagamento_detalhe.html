{% extends 'base.html' %}

{% block title %}Faturas{% endblock %}

{% block content %}
  <div class="card">
    <div class="card-header text-center">
      <div class="text-center">
        <h6>Condomínio: <strong> {{condominio.nome}} </strong><h6>
      </div>
      <div class="col-8 m-auto pt-2 pb-2 text-center">
        {% include 'condominio/condominio_gestao_menu.html' %}
      </div>
    </div>
    <div class="card-body">
      <div class="col-8 m-auto pb-2">
        <h5 class="text-center">Detalhes do Pagamento</h5>
      </br>
      <table style="margin:auto">
        <tr><td>Fatura: <strong>{{ fatura.id }}</strong></td></tr>
        <tr><td>Unidade: <strong>{{ fatura.unidade.nome }}</strong></td></tr>
        <tr><td>Proprietário: <strong>{{ fatura.proprietario.nome }}</strong></td></tr>
        <tr><td>Locatário: <strong>{{ fatura.locatario.nome|default:'-' }}</strong></td></tr>
        <tr><td>Valor: R$ <strong>{{ fatura.valor|floatformat:'2' }}</strong></td></tr>
        <tr><td>Competência: <strong>{{ fatura.competencia_mes }}/{{ fatura.competencia_ano|stringformat:'i' }}</strong></td></tr>
        <tr><td>Vencimento: <strong>{{ fatura.data_vencimento|date:'d/m/Y' }}</strong></td></tr>
        <tr><td>Status: <strong>Paga em {{ fatura.data_pagamento|date:'d/m/Y' }} </strong> 
          {% if fatura.dias_atraso_pagamento %}
            ({{ fatura.dias_atraso_pagamento }} dias em atraso)
          {% endif %} 
        </td></tr>
        {% if fatura.valor_multa and fatura.valor_juro and fatura.valor_pago %}
          <tr><td>Multa ({{ condominio.multa }}%): <strong> {{ fatura.valor_multa }}</strong></td></tr>
          <tr><td>Juro ({{ condominio.juro_dia|floatformat:'4' }}% ao dia): <strong> {{ fatura.valor_juro }}</strong></td></tr>
          <tr><td>Valor Pago: <strong> {{ fatura.valor_pago }}</strong></td></tr>
        {% endif %}
      </table>
      </br>
      <div class="text-center">
        <button type="reset" class="btn btn-outline-info btn-sm" onclick="location.href = '{% url 'condominio:fatura_list' condominio.id %}'"><span class="fas fa-arrow-left"></span> Voltar</button>
      </div>
      
      {% if erro_formulario %}
          <div>erro formulário</div>
      {% endif %}

    </div>
  </div>
{% endblock %}